# 梦想图书室使用说明

# 一.安装
使用平板自带的浏览器, 输入 `http://54.149.244.137/apk/DCLMS_<version>_release.apk`
下载完成以后点击安装
安装完成后点击梦想图书室   
输入被分配的图书室号  
点击确认 

# 二.使用
## 读者功能
### 1.借阅图书
- 输入读者编号 （例：120）。点击“确认输入”。
- 扫描索书号或输入索书号（例：12345）。点击“确认输入”。
- 点击“确认借阅”，完成借阅。

**注意**
借书时可以同时借阅多本书。如果这本图书已被借阅，或超过可借阅图书的数量，可以输入新的索书号。

### 2.归还图书
- 扫描索书号或输入索书号（例：12345）。点击“确认输入”。
- 点击“确认归还”，完成归还。

**注意** 
归还图书时时可以归还**多本**书籍。如果这本图书没有被借阅，会有错误提示


### 3.自助借阅
自助借阅功能可帮助用户快速借书/还书. 同时只能对一本书籍进行操作.   

- 扫描索书号
- 若该书已被借出, 则可直接扫描确认码来归还该图书
- 扫描读者号
- 扫描确认码来借阅该图书

## 管理员功能
### 1.图书管理
- 添加图书: 点击图书管理页面右上角“＋”号键进入添加页面  
- 编辑图书: 长按单本图书直至弹出一个窗口，在窗口中选择“编辑”即可进入编辑模式  
- 删除图书: 长按单本图书直至弹出一个窗口，在窗口中选择“删除”，然后选择确认，即可删除该图书  
- 查看图书信息: 单击单本图书即可查看信息
- 搜索图书: 在搜索框中输入任意图书的标题、ISBN或者索书号，点击“搜索”即可进行搜索
- 重置：单击“重置”按钮即可清空搜索页面，恢复到图书管理页面初始状态   

### 1.1 添加图书
添加图书功能可以在数据库中添加一本新书 
输入ISBN后，点击任意其他文本框，程序会在本地数据中寻找是否有对应的图书。如果同一个ISBN有多个对应的图书，程序将会弹出提示框供您选择对应的图书。选中后系统会自动填入图书的信息。 
如果本地没有找到对应的图书，且豆瓣API处于开启状态，程序会自动通过网络检索ISBN对应的图书信息。   

- 在”图书管理”页面下单击右上角“+”键，即可进入添加页面 
- 点中要编辑的文本框进行编辑，编辑完后点击“保存”即可    

- 豆瓣API的使用方法
	1. 点击“豆瓣API”旁边的图标使之显示“开”的字样  
	2. 在显示“ISBN”的文本框里输入ISBN  
	3. 点击任意其它文本框，程序就会自动开始通过网络搜索该ISBN对应的图书信息  

### 1.2 批量导入新书
请准备一台电脑、一根平板连接电脑的数据线。
- 批量导入模板（下列两种方式可任选其一）
	1. 请用浏览器打开此链接，下载批量导入模板文件到电脑上，并保留第一行表头，清除其余示例数据：`http://54.149.244.137/apk/BookCopy-BatchImport-Template.csv`
	2. 或使用Excel（电子表格）软件，创建一个电子表格文件，在第1行前4个单元格输入4个表头名称: ISBN, retrieveNumber, donor, location
    
- 自第二行起，将图书的isbn号，索书号，捐赠人(若是梦想行动所捐赠，请填写"DC"或"梦想行动",否则留空)，图书位置（可留空，待入架后填写）填入。
- 保存之前，确认选中所有数据，并设置所有单元格格式为"文本"，以确保isbn一列不被Excel(电子表格)以科学记数法显示。
- 保存时请选择另存为"csv(逗号分隔)"格式的文件，并在软件弹出"将保存的文件格式可能有不兼容功能"对话框时，选择"是，去掉不兼容功能"。
- 保存后，再次确认 -- 用记事本(notepad)再次打开已保存的文件，确认: (1)所有ISBN号正确显示; (2)数据都以逗号分隔，并且没有被双引号引起
- 用数据线连接平板和电脑，将该文件存入平板的DreamCorps文件夹中
- 进入图书管理软件->管理员界面，点击右上角功能菜单，选择"备份数据"
- 再进入"图书管理"界面，点击右上角的功能菜单，选择"批量导入"，在打开的文件浏览器中找到刚才存入平板中的文件，软件将开始自动导入，导入完成后对话框会显示成功和失败的记录数量，并显示一个文件名，该文件位于导入文件的同一目录。查看此文件可以方便地查询未成功导入的数据。
- 再次进入"图书管理"界面，察看并确认新导入的图书数量是否正确、随机抽样检查图书信息是否显示完整
- Tips: 有时导入失败是因为豆瓣API的访问速度限制，等待1小时可尝试再次导入。有时失败是因为图书的ISBN不正确，无法在豆瓣上搜索到图书信息，这种情况请搜索在豆瓣网上搜索图书名称，并更正导入文件中的ISBN为网站所显示的ISBN

    

### 2.班级管理
班级管理是为了方便管理员快速查找读者的班级而搭建的功能, 该页面有以下几个功能

* 添加班级: 点击页面右上角“＋”号键进入添加页面
* 编辑班级：长按单个班级直至弹出一个窗口，在窗口中选择“编辑”即可进入编辑模式. 目前只有班级名称可以改变
* 删除班级：长按单本图书直至弹出一个窗口，在窗口中选择“删除”，然后选择确认，即可删除该班级. 注意:若要删除某班级,必须先将其内部的所有读者移除该班级  

### 3.身份管理
身份管理页面可以让管理员创建不同的借阅书籍的权限, 如"老师"可借出"8"本书借"14"天 
该页面同时也会显示有多少人是该身份  

- 添加身份: 点击页面右上角“＋”号键进入添加页面  
- 编辑身份: 长按单个班级直至弹出一个窗口，在窗口中选择“编辑”即可进入编辑模式. 
- 删除身份: 长按单本图书直至弹出一个窗口，在窗口中选择“删除”，然后选择确认，即可删除该身份. **注意**:若要删除某身份,必须先将所有该身份的读者改为其他身份 

   
### 4.读者管理
#### 功能介绍
- 添加读者：
点击读者管理里页面右上角“＋”号键进入添加页面
- 编辑读者：
长按单个读者直至弹出一个窗口，在窗口中选择“编辑”即可进入编辑模式, 之后选择想要编辑的内容即可
- 删除读者：
长按单本图书直至弹出一个窗口，在窗口中选择“删除”，然后选择确认，即可删除该读者
- 查询读者:
在搜索框里输入读者的姓名,或者学号, 或者班级名称即可
#### 批量导入读者
- 准备批量导入模板: 使用Excel（电子表格）软件，创建一个电子表格文件，在第1行前5个单元格输入表头名称: 
`userId(读者号),name(姓名),gender(男生写1女生写2),classInfo(对应班级管理中的班级名称),borrowRestriction(对应身份管理中的身份名称)`
- 按照表头录入读者信息，并另存数据文件为csv。同样地，请确认所有数字信息在用文本文件打开后都能正确显示
- 进入图书管理软件，创建班级管理(管理员界面->班级管理)和身份信息(管理员界面->身份管理)。注意：请确认班级名称、身份名称与读者批量导入文件中的对应数据相匹配。无法匹配班级名称或身份名称的记录将无法导入。
- 完成后请进行一次数据备份
- 之后，将读者信息的csv文件传到平板/手机上，通过"读者管理"->从文件导入功能来选择该csv文件进行批量导入。
- 导入完成时会显示成功和失败的数量，并显示失败日志文件的名称。该文件可以在导入文件相同的目录下找到。
- Tips: 通常读者导入失败，原因是读者号重复、读者班级无法匹配、或读者身份无法匹配


### 5.借阅历史
借阅历史页面可以查询所有的借阅历史。在页面输入框中输入**索书号**或**读者号**可以进行查询。


### 6.超期查询
超期查询页面可现实当前所有已经超期的借阅记录, 以方便图书管理员了解当前图书馆状况


# 三.数据备份与恢复
### 1.书籍备份
在**管理员页面**，点击页面右上角“更多功能”图标（三个竖着的小黑点图标），在弹出的菜单中点击“备份数据库”， 数据将会备份到“USB存储器”目录下Dreamcorps文件夹内。在有网络连接的情况下，文件将会上传到服务器。

### 2.恢复数据
在**管理员页面**, 点击页面右上角“更多功能”图标（三个竖着的小黑点图标），在弹出的菜单中点击“还原数据库”，打开文件目录。进入“USB存储器” -> "Dreamcorps"文件夹 -> 选择最新的数据备份（按文件名上的备份时间）。**注意** 恢复成功后，软件会提示、并自动重启。


# 四.注意事项
## 软件帮助
每个页面右上角都有帮助功能, 用户可以在需要的时候点开来查看如何使用当前功能
## 用户反馈
每一个页面右上角都有"提供反馈"功能, 希望用户能够多多使用, 帮助梦想完善这个梦想图书室App
